<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Select one cell - jRna examples</title>
    <script lang="javascript" src="3rd-party/jquery.js"></script>
    <script lang="javascript" src="../lib/jRna.js"></script>
    <script lang="javascript" id="description">
        const descr = {"title":"Select one cell - jRna examples"}
    </script>
    <script lang="javascript">
        window.onerror = function(msg) {
            document.getElementById("error").innerHTML += '<div>'+msg+'</div>';
        };
    </script>
    <style>
        .active {
            background-color: yellow;
        }
        .grid-container {
            display: grid;
            height: 80%;
            width: 60%;
            text-align: center;
        }
        .cell {
            margin: 1px;
            border: 1px solid blue;
            line-height: 100%;
            text-align: center;
        }
        .middle {
            position: relative;
            transform: translateY(50%);
            height: 100%;
            line-height: 0;
            display: inline-block;
        }
        .big {
            font-size: 300%;
        }
        h1 {
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="error" style="color: red"></div>
    <h1>Select one cell - jRna examples</h1>

    <!-- initial node to attach to -->
    <div id="root" align="center">
        <div class="grid-container"></div>
    </div>

    <!-- the script is here -->
    <script lang="javascript" id="main">
        "use strict";

        const cell = new jRna()
            .html('<div class="cell jrna-cell"><div class="jrna-label big middle"></div></div>')
            .output('label')
            .args('label')
            .toggle('cell', function() {
                this.container.addClass('active');
            }, function () {
                this.container.removeClass('active');
            } );

        let counter = 1;

        const grid = new jRna()
            .args('count')
            .on_attach(function() {
                const percent = Math.floor(100/this.count) + '%';
                this.container.css(
                    'grid-template-columns',
                    Array(this.count).fill(percent).join(' ')
                );
                for (let i = 0; i < this.count * this.count; i++)
                    cell.append_to(this.container, { label: counter++ });
            })
            .attach('.grid-container', { count : 3 });
    </script>

    <!-- describe how to use the page, if needed -->
    <div id="usage">
    </div>
</body>
</html>
