<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Select one cell - jRna examples</title>
    <script lang="javascript" src="3rd-party/jquery.js"></script>
    <script lang="javascript" src="../lib/jRna.js"></script>
    <script lang="javascript" id="description">
        const descr = {"title":"Select one cell - jRna examples"}
    </script>
    <script lang="javascript">
        window.onerror = function(msg) {
            document.getElementById("error").innerHTML += '<div>'+msg+'</div>';
        };
    </script>
    <style>
        .active {
            background-color: yellow;
        }
        td {
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="error" style="color: red"></div>
    <h1>Select one cell - jRna examples</h1>

    <!-- initial node to attach to -->
    <div id="root" align="center">
        <table border="0" id="field" width="80%">
        </table>
    </div>

    <!-- the script is here -->
    <script lang="javascript" id="main">
        "use strict";

        const cell = new jRna()
            .html('<td class="jrna-cell"></td>')
            .output('cell')
            .args('cell')
            .toggle('cell', function() {
                this.container.addClass('active');
            }, function () {
                this.container.removeClass('active');
            } );

        let counter = 1;
        const row = new jRna()
            .html('<tr></tr>')
            .args('count')
            .on_attach(function() {
                for (let i = 0; i < this.count; i++)
                    cell.append_to(this.container, { cell: counter++ });
            });

        const table = new jRna()
            .args('count')
            .on_attach(function() {
                for (let i = 0; i < this.count; i++)
                    row.append_to(this.container, { count: this.count });
            })
            .attach('#field', { count : 3 });
    </script>

    <!-- describe how to use the page, if needed -->
    <div id="usage">
    </div>
</body>
</html>
